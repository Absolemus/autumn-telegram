#Область Переменные

&Пластилин
Перем ВнешнийАдрес; // Внешний адрес, на который будет установлен хук
&Пластилин
Перем Почтальон; // Коннектор к API Telegram

#КонецОбласти

#Область ОбработчикиСобытий

&ХранительНавыков
Процедура ПриСозданииОбъекта()
КонецПроцедуры

#КонецОбласти

#Область ПрограммныйИнтерфейс

&Навык("setWebhook")
// Установка хука
// Возвращаемое значение:
// 		Ответ - см. КоннекторHTTP.ПодготовленныйОтвет		
Функция УстановитьХук() Экспорт
	Почтальон.УстановитьМетод("setWebhook");
	Почтальон.УстановитьПараметр("url", ВнешнийАдрес);
	Возврат Почтальон.Отправить();
КонецФункции

&Навык("deleteWebhook")
// Удаление хука
// Возвращаемое значение:
// 		Ответ - см. КоннекторHTTP.ПодготовленныйОтвет		
Функция УдалитьХук() Экспорт
	Почтальон.УстановитьМетод("deleteWebhook");
	Почтальон.УстановитьПараметр("drop_pending_updates", Истина);
	Возврат Почтальон.Отправить();
КонецФункции

&Навык("getWebhookInfo")
// Получение информации о хуке
// Возвращаемое значение:
// 		Ответ - см. КоннекторHTTP.ПодготовленныйОтвет		
Функция ИнформацияОХуке() Экспорт
	Почтальон.УстановитьМетод("getWebhookInfo");
	Возврат Почтальон.Отправить();
КонецФункции

#КонецОбласти